<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.0.76"/><style data-styled="cEBkMf gqwQqo hAazOm eQyeOI VeZlH kkqdts fqqaVC mQPfw jZhkXs bfwZCb fJCzJc jeGaYX jNiOmO iwuDfh hUCjEq hWflyi jIFvbx fZDpkr lddhRw bSWVxc" data-styled-version="4.1.3">
/* sc-component-id: Link__StyledGatsbyLink-jyt87h-0 */
.iwuDfh{color:#0a517b;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid #0a517b;} .iwuDfh:hover,.iwuDfh:focus{border-bottom:1px dashed #0a517b;color:#0a517b;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: Link__RegularLink-jyt87h-1 */
.fJCzJc{color:#0a517b;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid #0a517b;} .fJCzJc:hover,.fJCzJc:focus{border-bottom:1px dashed #0a517b;color:#0a517b;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: Bio__BioContainer-rj3ut0-0 */
.hUCjEq{display:grid;grid-gap:10px;grid-template-columns:50px 1fr;}
/* sc-component-id: Box-sc-172hg9r-0 */
.jZhkXs{margin-bottom:25px;margin-top:25px;}
/* sc-component-id: sc-global-631278321 */
*{margin:0;padding:0;box-sizing:border-box;} img{border:0;max-width:100%;} h1,h2,h3,h4{font-weight:bold;} html{height:100%;} body{color:#444;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen", "Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue", sans-serif;height:100%;line-height:1.6;} code[class*="language-"],pre[class*="language-"]{color:white;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;} pre[class*="language-"]{overflow:auto;padding:1em;} pre[class*="language-"]::-moz-selection{background:hsl(207,4%,16%);} pre[class*="language-"]::selection{background:hsl(207,4%,16%);} pre[class*="language-"]::-moz-selection,pre[class*="language-"] ::-moz-selection{text-shadow:none;background:hsla(0,0%,100%,0.15);} pre[class*="language-"]::selection,pre[class*="language-"] ::selection{text-shadow:none;background:hsla(0,0%,100%,0.15);} :not(pre) > code[class*="language-"]{border-radius:.3em;background:rgba(255,229,100,0.2);color:#1a1a1a;padding:.15em .2em .05em;white-space:normal;} .token.attr-name{color:rgb(173,219,103);font-style:italic;} .token.comment{color:rgb(99,119,119);} .token.string,.token.url{color:rgb(173,219,103);} .token.variable{color:rgb(214,222,235);} .token.number{color:rgb(247,140,108);} .token.builtin,.token.char,.token.constant,.token.function{color:rgb(130,170,255);} .token.punctuation{color:rgb(199,146,234);} .token.selector,.token.doctype{color:rgb(199,146,234);font-style:'italic';} .token.class-name{color:rgb(255,203,139);} .token.tag,.token.operator,.token.keyword{color:#ffa7c4;} .token.boolean{color:rgb(255,88,116);} .token.property{color:rgb(128,203,196);} .token.namespace{color:rgb(178,204,214);} pre[data-line]{padding:1em 0 1em 3em;position:relative;} .gatsby-highlight-code-line{background-color:hsla(207,95%,15%,1);display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:0.75em;border-left:0.25em solid #ffa7c4;} .gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#16191d;-webkit-overflow-scrolling:touch;overflow:auto;} .gatsby-highlight pre[class*="language-"]{float:left;min-width:100%;}
/* sc-component-id: Layout__VisuallyHidden-sc-11zbcp0-0 */
.jIFvbx{border:0;-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;}
/* sc-component-id: Layout__DarkContainer-sc-11zbcp0-1 */
.gqwQqo{background-color:#293139;}
/* sc-component-id: Layout__Heading-sc-11zbcp0-2 */
.hAazOm{font-size:20px;margin:0 auto;max-width:780px;}
/* sc-component-id: Layout__HeaderLink-sc-11zbcp0-3 */
.eQyeOI{border:none;color:#fff;display:block;padding:5px 20px;-webkit-text-decoration:none;text-decoration:none;} .eQyeOI:hover{-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: Layout__Footer-sc-11zbcp0-4 */
.hWflyi{margin:0 auto;max-width:780px;}
/* sc-component-id: Layout__FooterList-sc-11zbcp0-5 */
.fZDpkr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: Layout__FooterLink-sc-11zbcp0-6 */
.bSWVxc{border:none;color:#fff;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid #fff;} .bSWVxc:focus,.bSWVxc:hover{border-bottom:1px dashed #fff;}
/* sc-component-id: Layout__FooterItem-sc-11zbcp0-7 */
.lddhRw{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:10px;} .lddhRw:not(:last-child)::after{content:'/';color:rgba(255,255,255,0.3);margin-left:20px;}
/* sc-component-id: Layout__Main-sc-11zbcp0-8 */
.cEBkMf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}
/* sc-component-id: Layout__Content-sc-11zbcp0-9 */
.VeZlH{-webkit-flex:1;-ms-flex:1;flex:1;margin:0 auto 25px;max-width:780px;padding:0 20px;}
/* sc-component-id: blog-post__Date-sc-1pfh6r7-0 */
.fqqaVC{color:#999;}
/* sc-component-id: blog-post__PostHeading-sc-1pfh6r7-1 */
.kkqdts{color:#293139;padding:20px 0;font-size:35px;} @media (min-width:700px){.kkqdts{padding:40px 0;font-size:40px;}}
/* sc-component-id: blog-post__Hr-sc-1pfh6r7-2 */
.jeGaYX{background:hsla(0,0%,0%,0.2);border:none;margin:0;margin-bottom:calc(1.75rem - 1px);padding:0;height:1px;}
/* sc-component-id: blog-post__MarkdownStyles-sc-1pfh6r7-3 */
.mQPfw a{color:#0a517b;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid #0a517b;} .mQPfw a:hover,.mQPfw a:focus{border-bottom:1px dashed #0a517b;color:#0a517b;-webkit-text-decoration:none;text-decoration:none;} .mQPfw ul{list-style-type:disc;} .mQPfw ul,.mQPfw ol{margin:1.2em 0 1.2em 2.3em;} .mQPfw p{margin:1.2em 0;} .mQPfw blockquote{font-style:italic;padding:0 3em;} .mQPfw pre{overflow:auto;}
/* sc-component-id: blog-post__NextPreviousList-sc-1pfh6r7-4 */
.jNiOmO{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style-type:none;}
/* sc-component-id: blog-post__Twitter-sc-1pfh6r7-5 */
.bfwZCb{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#1b95e0;border:none;border-radius:4px;color:#fff;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;font-size:13px;font-weight:500;height:20px;padding:15px 10px;-webkit-text-decoration:none;text-decoration:none;} .bfwZCb:hover,.bfwZCb:focus{background-color:#0c7abf;border:none;color:#fff;} .bfwZCb:active{box-shadow:inset 0 3px 7px rgba(0,0,0,0.1);} .bfwZCb::before{background:transparent 0 0 no-repeat;background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2072%2072%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h72v72H0z%22%2F%3E%3Cpath%20class%3D%22icon%22%20fill%3D%22%23fff%22%20d%3D%22M68.812%2015.14c-2.348%201.04-4.87%201.744-7.52%202.06%202.704-1.62%204.78-4.186%205.757-7.243-2.53%201.5-5.33%202.592-8.314%203.176C56.35%2010.59%2052.948%209%2049.182%209c-7.23%200-13.092%205.86-13.092%2013.093%200%201.026.118%202.02.338%202.98C25.543%2024.527%2015.9%2019.318%209.44%2011.396c-1.125%201.936-1.77%204.184-1.77%206.58%200%204.543%202.312%208.552%205.824%2010.9-2.146-.07-4.165-.658-5.93-1.64-.002.056-.002.11-.002.163%200%206.345%204.513%2011.638%2010.504%2012.84-1.1.298-2.256.457-3.45.457-.845%200-1.666-.078-2.464-.23%201.667%205.2%206.5%208.985%2012.23%209.09-4.482%203.51-10.13%205.605-16.26%205.605-1.055%200-2.096-.06-3.122-.184%205.794%203.717%2012.676%205.882%2020.067%205.882%2024.083%200%2037.25-19.95%2037.25-37.25%200-.565-.013-1.133-.038-1.693%202.558-1.847%204.778-4.15%206.532-6.774z%22%2F%3E%3C%2Fsvg%3E);content:' ';height:18px;margin-right:8px;width:18px;}</style><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><title data-react-helmet="true">5 Lessons Learned Using gulp.js | Christian Vuerings</title><meta data-react-helmet="true" name="description" content="Using  gulp.js  isn’t always straightforward. Here are a couple of tips to help you out. 1. Things don’t run in sequence With  gulp.js  tasks don’t run in the…"/><meta data-react-helmet="true" property="og:title" content="5 Lessons Learned Using gulp.js"/><meta data-react-helmet="true" property="og:description" content="Using  gulp.js  isn’t always straightforward. Here are a couple of tips to help you out. 1. Things don’t run in sequence With  gulp.js  tasks don’t run in the…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Christian Vuerings"/><meta data-react-helmet="true" name="twitter:title" content="5 Lessons Learned Using gulp.js"/><meta data-react-helmet="true" name="twitter:description" content="Using  gulp.js  isn’t always straightforward. Here are a couple of tips to help you out. 1. Things don’t run in sequence With  gulp.js  tasks don’t run in the…"/><link as="script" rel="preload" href="/1-80129e349bf743aad75d.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-45fc53e595e3235484c4.js"/><link as="script" rel="preload" href="/0-bba33937ad4c3962d12b.js"/><link as="script" rel="preload" href="/app-632492d5be46657f0eac.js"/><link as="script" rel="preload" href="/webpack-runtime-2a78cabab49dd5a96bca.js"/><link as="fetch" rel="preload" href="/static/d/653/path---5-lessons-learned-using-gulpjs-fb-5-3f9-Bu4JsKonrj0ESzyueyLDK9N3GU.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="Layout__Main-sc-11zbcp0-8 cEBkMf"><div class="Layout__DarkContainer-sc-11zbcp0-1 gqwQqo"><h1 class="Layout__Heading-sc-11zbcp0-2 hAazOm"><a class="Layout__HeaderLink-sc-11zbcp0-3 eQyeOI" href="/">Christian Vuerings</a></h1></div><div class="Layout__Content-sc-11zbcp0-9 VeZlH"><h1 class="blog-post__PostHeading-sc-1pfh6r7-1 kkqdts">5 Lessons Learned Using gulp.js</h1><p class="blog-post__Date-sc-1pfh6r7-0 fqqaVC">December 29, 2014</p><div class="blog-post__MarkdownStyles-sc-1pfh6r7-3 mQPfw"><div><p>Using <a href="http://gulpjs.com/">gulp.js</a> isn’t always straightforward. Here are a couple of tips to help you out.</p>
<h3>1. Things don’t run in sequence</h3>
<p>With <a href="http://gulpjs.com/">gulp.js</a> tasks don’t run in the order you define them. In fact they run in concurrently to make the total execution faster.</p>
<p>If you however want run tasks in order, you can define dependencies like this:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">cb</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>In previous versions of gulp, you should have used something like <a href="https://github.com/teambition/gulp-sequence">gulp-sequence</a> or <a href="https://github.com/OverZealous/run-sequence">run-sequence</a>.</p>
<h3>2. Watch carefully</h3>
<p>When you watch for changes in files, make sure to only watch the files that change on a regular basis.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Yes</span>
gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'src/js/**/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// No</span>
gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'**/*.*'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Otherwise running the <code class="language-text">gulp</code> task in the command line will result in a slower tasks and high CPU / memory usage.</p>
<h3>3. Gulp-inject</h3>
<p>After concatenating and minifying CSS and JavaScript files, I wanted to find a way to dynamically add those files to the HTML page. <a href="https://github.com/klei/gulp-inject">gulp-inject</a> was the plug-in that did the trick for me.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Make sure all the previous tasks (concatenation / minification) are run first</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'images'</span><span class="token punctuation">,</span> <span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">,</span> <span class="token string">'fonts'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> inject <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-inject'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./src/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Read = false will not read the file contents and make the task faster</span>
    <span class="token keyword">var</span> sources <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span>paths<span class="token punctuation">.</span>build<span class="token punctuation">.</span>js<span class="token punctuation">,</span> paths<span class="token punctuation">.</span>build<span class="token punctuation">.</span>css<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> target
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">inject</span><span class="token punctuation">(</span>sources<span class="token punctuation">,</span> <span class="token punctuation">{</span>

        <span class="token comment">// Do not add a root slash to the beginning of the path</span>
        addRootSlash<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

        <span class="token comment">// Remove the `public` from the path when doing the injection</span>
        ignorePath<span class="token punctuation">:</span> <span class="token string">'public'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>And this is the <code class="language-text">html</code> part:</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- inject:js --></span>
    <span class="token comment">&lt;!-- endinject --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code></pre></div>
<p>Next to <code class="language-text">html</code>, it also <a href="https://github.com/klei/gulp-inject/blob/b8618337e09ece47d8e89cf56e5b2c1c248208bd/README.md#injecttransform">supports</a> <code class="language-text">jade</code>, <code class="language-text">jsx</code>, <code class="language-text">slm</code> and <code class="language-text">haml</code>.</p>
<h3>4. Using bower?</h3>
<p>When you’re using <a href="http://bower.io/">bower</a> to manage your dependencies, <a href="https://github.com/ck86/main-bower-files">main-bower-files</a> will come in handy. Otherwise you’ll have to manually define which bower files you want to include.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> mainBowerFiles <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'main-bower-files'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> paths <span class="token operator">=</span> <span class="token punctuation">{</span>
  src<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    js<span class="token punctuation">:</span> <span class="token function">mainBowerFiles</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

      <span class="token comment">// Set the base path for your bower components</span>
      base<span class="token punctuation">:</span> <span class="token string">'./bower_components'</span><span class="token punctuation">,</span>

      <span class="token comment">// Only return the JavaScript files</span>
      filter<span class="token punctuation">:</span> <span class="token regex">/.*\.js$/i</span>

    <span class="token comment">// Concatenate the bower files with your own</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'src/js/**/*.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>5. Node + browsersync: possible but cumbersome</h3>
<p>One of the most tedious parts was finding a way to make gulp work with <a href="https://github.com/remy/nodemon">nodemon</a> (automatically restart node) and <a href="http://www.browsersync.io/">BrowserSync</a>. The <a href="https://github.com/sogko/gulp-recipes/blob/master/browser-sync-nodemon-expressjs/gulpfile.js">gulpfile</a> from <a href="https://github.com/sogko">Hafiz Ismail</a> was a great start and I made some small changes.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'nodemon'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> nodemon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-nodemon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// We use this `called` variable to make sure the callback is only executed once</span>
  <span class="token keyword">var</span> called <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">nodemon</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    script<span class="token punctuation">:</span> <span class="token string">'server.js'</span><span class="token punctuation">,</span>
    watch<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'server.js'</span><span class="token punctuation">,</span> <span class="token string">'server/**/*.*'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>called<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'restart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">onRestart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Also reload the browsers after a slight delay</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      browserSync<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        stream<span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Make sure `nodemon` is started before running `browser-sync`.</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'browser-sync'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token string">'nodemon'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">5000</span><span class="token punctuation">;</span>
  browserSync<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

    <span class="token comment">// All of the following files will be watched</span>
    files<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'public/**/*.*'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">// Tells BrowserSync on where the express app is running</span>
    proxy<span class="token punctuation">:</span> <span class="token string">'http://localhost:'</span> <span class="token operator">+</span> port<span class="token punctuation">,</span>

    <span class="token comment">// This port should be different from the express app port</span>
    port<span class="token punctuation">:</span> <span class="token number">4000</span><span class="token punctuation">,</span>

    <span class="token comment">// Which browser should we launch?</span>
    browser<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'google chrome'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3>Conclusion</h3>
<p>Hope you all taken something away from this post, if you have any remarks / comments, feel free to <a href="https://twitter.com/christianvuer">contact me on twitter</a>.</p></div></div><div class="Box-sc-172hg9r-0 jZhkXs"><a href="https://twitter.com/share?original_referer=undefined/5-lessons-learned-using-gulpjs/&amp;amp;url=undefined/5-lessons-learned-using-gulpjs/&amp;amp;text=5 Lessons Learned Using gulp.js&amp;amp;via=christianvuerings" target="_blank" class="blog-post__Twitter-sc-1pfh6r7-5 bfwZCb Link__RegularLink-jyt87h-1 fJCzJc">Tweet</a></div><hr class="blog-post__Hr-sc-1pfh6r7-2 jeGaYX"/><div class="Box-sc-172hg9r-0 jZhkXs"><ul class="blog-post__NextPreviousList-sc-1pfh6r7-4 jNiOmO"><li><a rel="prev" class="Link__StyledGatsbyLink-jyt87h-0 iwuDfh" href="/hub-supercharge-git/">← <!-- -->Hub - Supercharge Git</a></li><li><a rel="next" class="Link__StyledGatsbyLink-jyt87h-0 iwuDfh" href="/goals-interests-for-2015/">Goals &amp; Interests for 2015<!-- --> →</a></li></ul></div><div class="Box-sc-172hg9r-0 jZhkXs"><div class="Bio__BioContainer-rj3ut0-0 hUCjEq"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-bottom:0;min-width:50px;border-radius:100%"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAFR0lEQVQ4y1WUeUxUVxTGHxWpLNalLKKWguioKDCDMOxbwYKFgakICggykYpSRFFEg1A0alK1uGCl0kbT2MRGEdRqXELTpIl/aFqr1mABYWbe7DvL4NY33K/3DQ5Jb/Ll3tzc83vnu+e8y7AGG8MPpd7KqIzD771beyq0lo1ynfmqymBhtXoLp5kUS9VFVU7lxZ9VaU1uap3ZyXDNPMCNeTfkGlORXGseNI2+gWnsDdQmG9QGKzTGYejNIxgdf+uU1mAdoip2xVGY21RmrqHQWU5Y7P/CMPwSFMop9FZObRmd0OqMRKfSEJ3RTDQGC0eDObPN7gTT9WlXPM2WmbKpNo2ceDkB6K1jDp1l1KG12smQUkt6bvaQ1rOdpLXtCvm15yGRy9WE1ZkJDXZQceOvJ0Dntv9lSWFFw68c0FrGHHrb6IR57DUe9Q6S1n0HSdOWXSivOYjyih3YXtuCmxd/hvLxIyLXmqDUmyjcxI3Y34LeaYkTNsDqPanVQZ1tnB6wOqhgsr8hh74+i7WpEuSlZWNp4DzM8ZiOWVRhQcE419wEVq4iGtMwD3KYrHbeukKpNngzg2rjRj29MzpzL1QGojJYyYNnA4hLXYvoZSLMm+mDyPl+SFsSBPHHgQj08Yaftw9uXL0Ok81OWI2Rt8zZRl+BAisYCrnqAvYr9fxXyeU7v0MgECJzRTBSBB8hlcI2xYZDGiGAODgQ/u4MGnbshm30NVGo9DyUs47QQrK6bt4ySysKOk/0yTVEYx7D9xd+QqIgCK2b8lC3OgFlsRE4tV6CA59/isqUKHRUF6Dz4nmwOgvNygl0GGhLUeATpk+hpZnpQEUG1EbS1z+Ew+tzIBUuwqX6rfiuvBC16fE4VvQZOnfKcLexGvb7l3G5pQZyhQYKtYEoJ7PkgWO0D0c4ucZMgVryQmUk/XI1LlTLsC87Dme2FKI+Kx6ypBjsXZ2IW/u342SZBL0dTXjQsp0WRo0hCqMg3jpom9mZzlud7J/P+2iFbaRfoSEstfzbnXuoTovG4bI12FeQil2fxOPKzi9wu6UO7VX56D3/FbRP/gDtDrA0QwWrc1l+ysTET+sqq0zGtbt3uQFa5QGW2mf1ONd2BnXSdOwpzMSxYimOS7Kg6PoBzy8dxoPrP0Jve4UX1NVfz/4hA/y1yTX4u3egmxGtmlOenOaJHOli7tqdW0RtGidynY3vK7RsLkZRYiSOydbh9pF6aO9dxP2OZhxt3Iue+49x7ZcbpLJKhnxpJldSkoHGphoZ479ggVeEyGuIZoq8wnBHQ/M2tHW0Ef5e2/fvRn70MqyNj0RNbhpaa0rQuC4FUaJ0FNSeJEmxSxEmCHAIQmZDtHK2MmAO4+P8W0JD5hZHhPtCFO3Bpab7kvJyCbIlUrJ5TTpppBXPFi1DdLA/duTEIS8qjAizviSJleeRuiafJIkDuOTYEKTEB5c5YSErGecPLY71PZ2SHoqoxAQuYOESB92CRBxJTm8tJXukWWRbVhLZnZtKVoVFkdCMWohLTzliNxzlEgrqkJxb2s4zKr556MYkJQunnq+AxdFtHrMXwcdrFtzdZ3BJYaFce3Wp48CGPNJclEtyxULHzPlCbmXOXk4oPYCQlGr4Rmxod8WLJTsnX5uYmKVTD+ysmR+UeL0/QzFt2nQsXxiI45sLcKhEgoaCbPjN9ceHSzKwIrsewYmVyoXijWWuuIjMyklGYlLIJDQhjImN8HZuBgYEeXu4e1R4zfDslsStelKVkzmWIVxh9/Dye7pAVNC9OKVK5rs8x1mA/Lout/CcBmdcmuxb5j80tKmPPzXf+wAAAABJRU5ErkJggg==" alt="Christian Vuerings" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/c4ae59ff927099d0a303d6974302c439/66382/profile-picture.png 1x,
/static/c4ae59ff927099d0a303d6974302c439/18a61/profile-picture.png 1.5x,
/static/c4ae59ff927099d0a303d6974302c439/f52d2/profile-picture.png 2x,
/static/c4ae59ff927099d0a303d6974302c439/4ffea/profile-picture.png 3x" /><img width="50" height="50" src="/static/c4ae59ff927099d0a303d6974302c439/66382/profile-picture.png" alt="Christian Vuerings" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div>Personal blog by<!-- --> <a href="https://twitter.com/christianvuerings" class="Link__RegularLink-jyt87h-1 fJCzJc">Christian Vuerings</a><br/>I love to share interesting ideas.</div></div></div></div><div class="Layout__DarkContainer-sc-11zbcp0-1 gqwQqo"><footer class="Layout__Footer-sc-11zbcp0-4 hWflyi"><div class="vcard"><div class="Layout__VisuallyHidden-sc-11zbcp0-0 jIFvbx"><h2>Contact details</h2></div><ul class="Layout__FooterList-sc-11zbcp0-5 fZDpkr"><li class="Layout__FooterItem-sc-11zbcp0-7 lddhRw"><a href="https://twitter.com/christianvuer" title="Christian&#x27;s twitter page" target="_blank" class="Layout__FooterLink-sc-11zbcp0-6 bSWVxc">Twitter</a></li><li class="Layout__FooterItem-sc-11zbcp0-7 lddhRw"><a href="https://github.com/christianvuerings" title="Have a peek at Christian&#x27;s github repositories" target="_blank" class="Layout__FooterLink-sc-11zbcp0-6 bSWVxc">GitHub</a></li><li class="Layout__FooterItem-sc-11zbcp0-7 lddhRw"><a href="https://www.linkedin.com/in/christianvuerings" title="Contact Christian for business enquiries" target="_blank" class="Layout__FooterLink-sc-11zbcp0-6 bSWVxc">LinkedIn</a></li></ul></div></footer></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-190225-7', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"5-lessons-learned-using-gulpjs-fb5","path":"/5-lessons-learned-using-gulpjs/"};window.dataPath="653/path---5-lessons-learned-using-gulpjs-fb-5-3f9-Bu4JsKonrj0ESzyueyLDK9N3GU";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-632492d5be46657f0eac.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-302b2f1c7106d1597605.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-45fc53e595e3235484c4.js"],"component---src-pages-404-js":["/component---src-pages-404-js-c409471bd8c6328a8d1d.js"],"component---src-pages-index-js":["/component---src-pages-index-js-eea2cba4274e21be54ac.js"],"pages-manifest":["/pages-manifest-f7ce15f391bbb0c8dbdb.js"]};/*]]>*/</script><script src="/webpack-runtime-2a78cabab49dd5a96bca.js" async=""></script><script src="/app-632492d5be46657f0eac.js" async=""></script><script src="/0-bba33937ad4c3962d12b.js" async=""></script><script src="/component---src-templates-blog-post-js-45fc53e595e3235484c4.js" async=""></script><script src="/1-80129e349bf743aad75d.js" async=""></script></body></html>